# Clipet å¼€å‘è·¯çº¿å›¾

## é‡Œç¨‹ç¢‘è®¡åˆ’

### M1: æ ¸å¿ƒéª¨æ¶ âœ…

> ç›®æ ‡ï¼šå¯ç¼–è¯‘è¿è¡Œï¼ŒCLI å¿«æ·å‘½ä»¤å¯ç”¨ï¼ŒTUI åŸºç¡€äº¤äº’

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| é¡¹ç›®åˆå§‹åŒ– (go mod, git, deps) | âœ… |
| æ’ä»¶ç³»ç»Ÿ (types, parser, validator, loader, registry) | âœ… |
| çŒ«å†…ç½®ç‰©ç§åŒ… (species.toml, dialogues.toml, adventures.toml, 16 å¸§) | âœ… |
| assets/embed.go | âœ… |
| æ¸¸æˆé€»è¾‘ pet.go | âœ… |
| æŒä¹…åŒ– store/ | âœ… |
| CLI å‘½ä»¤ (init, status, feed, play) | âœ… |
| TUI (app, home, petview, theme, bridge) | âœ… |
| å…¥å£ main.go | âœ… |
| clipet-dev å¼€å‘è€…å·¥å…· | âœ… |

### M2: å±æ€§è¡°å‡ä¸è¿›åŒ–å¼•æ“ âœ…

> ç›®æ ‡ï¼šå±æ€§éšæ—¶é—´è¡°å‡ï¼Œç¦»çº¿è¡¥å¿è®¡ç®—ï¼Œè¿›åŒ–æ¡ä»¶å¼•æ“ï¼ŒTUI è¿›åŒ–ç•Œé¢

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| è¿›åŒ–å¼•æ“ game/evolution.go | âœ… |
| ç¦»çº¿è¡°å‡ ApplyOfflineDecay | âœ… |
| è¾…åŠ©æ–¹æ³• GetAttr, UpdateFeedRegularity | âœ… |
| TUI è¿›åŒ–å±å¹• screens/evolve.go | âœ… |
| TUI app.go å±å¹•åˆ‡æ¢ä¸é›†æˆ | âœ… |
| CLI å‘½ä»¤é›†æˆè¡°å‡+è¿›åŒ–æ£€æŸ¥ | âœ… |

### M2.5: å±æ€§ç³»ç»Ÿé‡æ„ âœ…

> ç›®æ ‡ï¼šæ“ä½œå†·å´ã€æ”¶ç›Šé€’å‡ã€å‰ç½®æ¡ä»¶ï¼Œè®©å® ç‰©äº’åŠ¨æ›´çœŸå®

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| ActionResult è¿”å›å€¼ç»“æ„ä½“ | âœ… |
| diminish æ”¶ç›Šé€’å‡å…¬å¼ | âœ… |
| æ“ä½œå†·å´ (Feed 10m, Play 5m, Rest 15m, Heal 20m, Talk 2m) | âœ… |
| å‰ç½®æ¡ä»¶æ£€æŸ¥ | âœ… |
| TUI è­¦å‘Šæ¶ˆæ¯æ ·å¼ | âœ… |
| CLI é€‚é…æ–°ç­¾å | âœ… |

### M3: è¿·ä½ æ¸¸æˆ âœ…

> ç›®æ ‡ï¼šå†…åµŒå°å‹æ¸¸æˆï¼Œèƒœè´Ÿå½±å“å® ç‰©å±æ€§

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| MiniGame æ¥å£è®¾è®¡ (çº¯çŠ¶æ€æœºï¼Œæ— é˜»å¡ I/O) | âœ… |
| æ¸¸æˆç®¡ç†å™¨å·¥å‚ games/manager.go | âœ… |
| ååº”é€Ÿåº¦æµ‹è¯• reaction.go (Start/HandleKey/Tick/View) | âœ… |
| çŒœæ•°å­—æ¸¸æˆ guess.go (é”®ç›˜è¾“å…¥ç¼“å†² + çŒœæµ‹å†å²) | âœ… |
| TUI æ¸¸æˆè¦†ç›–å±‚ (å…¨å±æ¸²æŸ“ + Esc é€€å‡º) | âœ… |
| å±æ€§å½±å“ï¼šç²¾åŠ›æ¶ˆè€—(å‰ç½®) + å¿«ä¹åº¦å¥–æƒ©(ç»“ç®—) | âœ… |

### M5: å¯¹è¯ç³»ç»Ÿ âœ…

> ç›®æ ‡ï¼šä¸°å¯Œå¯¹è¯ä½“éªŒï¼Œè‡ªåŠ¨é—²èŠï¼Œæ°”æ³¡ç•Œé¢

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| å¯¹è¯æ°”æ³¡ç»„ä»¶ components/dialoguebubble.go | âœ… |
| é—²èŠè‡ªåŠ¨è§¦å‘ (æ¯3åˆ†é’Ÿ30%æ¦‚ç‡ï¼Œå¤±è´¥å1åˆ†é’Ÿé‡è¯•) | âœ… |
| TUI é›†æˆæ°”æ³¡æ˜¾ç¤ºåœ¨å® ç‰©ä¸Šæ–¹ | âœ… |

### TUI æ¶æ„ä¼˜åŒ– âœ…

> ä»£ç å®¡æŸ¥åçš„æ•´ä½“é‡æ„

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| äºŒçº§èœå• (åˆ†ç±»æ ‡ç­¾ + å­æ“ä½œ) | âœ… |
| æ¸¸æˆä»é˜»å¡ I/O é‡å†™ä¸º Bubble Tea äº‹ä»¶é©±åŠ¨çŠ¶æ€æœº | âœ… |
| ä¿®å¤ gameResultHandler å€¼æ¥æ”¶è€…ä¿®æ”¹ä¸¢å¤± | âœ… |
| ä¿®å¤ PlayGame ä¸‰é‡å±æ€§ä¿®æ”¹ â†’ åˆ†ç¦»ä¸ºæ¶ˆè€—(å‰ç½®)+å¥–æƒ©(ç»“ç®—) | âœ… |
| ä¿®å¤å¯¹è¯/æ¶ˆæ¯åŒç³»ç»Ÿæ··ä¹± â†’ ç»Ÿä¸€ä¸º bubble + message | âœ… |
| ä¿®å¤ t å¿«æ·é”®ç¼ºå°‘ return | âœ… |
| è¿›åŒ–å±å¹•æ·»åŠ  Esc å–æ¶ˆ | âœ… |
| å¯¼å‡º Clampã€ç§»é™¤é‡å¤ clamp | âœ… |
| ç§»é™¤ RenderAligned æ­»ä»£ç  | âœ… |
| ç§»é™¤ lipgloss Copy() å¼ƒç”¨è°ƒç”¨ | âœ… |
| è‡ªåŠ¨å¯¹è¯ä» Update ç§»è‡³ Tickï¼ˆé¿å…æ¯æ¬¡æŒ‰é”®é‡å¤è§¦å‘ï¼‰ | âœ… |
| è¿›åŒ–æ£€æŸ¥åªåœ¨ç”¨æˆ·æ“ä½œåè§¦å‘ï¼ˆéæ¸¸æˆä¸­ï¼‰ | âœ… |
| store.Save é”™è¯¯æç¤ºåˆ°æ¶ˆæ¯åŒº | âœ… |
| executeAction é‡å¤ä»£ç æå–ä¸º failMsg/okMsg/infoMsg è¾…åŠ©æ–¹æ³• | âœ… |
| æ·»åŠ  GamePanel ä¸»é¢˜æ ·å¼ | âœ… |

### M4: å†’é™©ç³»ç»Ÿ âœ…

> ç›®æ ‡ï¼šéšæœºå†’é™©äº‹ä»¶ï¼Œé€‰é¡¹å¼äº¤äº’ï¼ŒåŠ æƒç»“æœ

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| å†’é™©å¼•æ“ game/adventure.go (CanAdventure, PickAdventure, ResolveOutcome) | âœ… |
| åŠ æƒéšæœºç»“æœè®¡ç®— + å±æ€§å½±å“ (ApplyAdventureOutcome) | âœ… |
| TUI å†’é™©å±å¹• screens/adventure.go (4é˜¶æ®µ: ä»‹ç»â†’é€‰æ‹©â†’åŠ¨ç”»â†’ç»“æœ) | âœ… |
| App å†’é™©å±å¹•åˆ‡æ¢ (screenAdventure + å®Œæ•´ç”Ÿå‘½å‘¨æœŸ) | âœ… |
| Home èœå•é›†æˆå†’é™©å…¥å£ (ğŸ—ºï¸ å†’é™©) | âœ… |
| Pet å†’é™©å†·å´å­—æ®µ LastAdventureAt (10åˆ†é’Ÿå†·å´) | âœ… |

### M6: é«˜çº§ç‰¹æ€§ï¼ˆè®¡åˆ’ä¸­ï¼‰

- [ ] å¤–éƒ¨æ’ä»¶çƒ­å®‰è£… `clipet plugin install <path>`
- [ ] æ­»äº¡ä¸é‡ç”Ÿæœºåˆ¶
- [ ] æˆå°±ç³»ç»Ÿ
- [ ] ç»Ÿè®¡é¢æ¿
- [ ] å¤šå® ç‰©å­˜æ¡£

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| è¯­è¨€ | Go 1.25+ |
| TUI æ¡†æ¶ | Bubble Tea v2 (`charm.land/bubbletea/v2`) |
| æ ·å¼ | Lipgloss v2 (`charm.land/lipgloss/v2`) |
| CLI | Cobra |
| é…ç½® | TOML (ç‰©ç§/å¯¹è¯) + JSON (å­˜æ¡£) |
| èµ„æºåµŒå…¥ | go:embed |

## æ¶æ„åŸåˆ™

- **çº¯é€»è¾‘ / UI åˆ†ç¦»**ï¼š`game/` åŒ…ä¸ä¾èµ–ä»»ä½• UI æ¡†æ¶
- **äº‹ä»¶é©±åŠ¨**ï¼šæ‰€æœ‰ UI äº¤äº’é€šè¿‡ Bubble Tea çš„ `Update(msg)` / `View()` æ¨¡å¼ï¼Œç¦æ­¢é˜»å¡ I/O
- **å€¼è¯­ä¹‰æ¨¡å‹**ï¼šBubble Tea model ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼›éœ€ä¿®æ”¹çŠ¶æ€æ—¶é€šè¿‡è¿”å›æ–°å€¼ä¼ é€’
- **æ’ä»¶åŒ–ç‰©ç§**ï¼šé€šè¿‡ TOML é…ç½®å®šä¹‰ç‰©ç§ã€è¿›åŒ–æ ‘ã€å¯¹è¯ã€å†’é™©

## ç¼–ç è§„èŒƒ

- æ‰€æœ‰ Go æ–‡ä»¶ä½¿ç”¨ `gofmt` æ ‡å‡†æ ¼å¼
- å†…éƒ¨åŒ…ç»Ÿä¸€åœ¨ `internal/` ä¸‹
- ä¸­æ–‡æ³¨é‡Šå’Œä¸­æ–‡ UI æ–‡æœ¬
- TOML ç”¨äºå¤–éƒ¨å¯é…ç½®æ•°æ®ï¼ŒJSON ç”¨äºå­˜æ¡£

### ä»£ç è´¨é‡æå‡ âœ…

> é‡æ„ä¸ä¼˜åŒ–

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| ä½¿ç”¨ Bubble æ ‡å‡†ç»„ä»¶é‡æ„ dev å‘½ä»¤ | âœ… |
| é›†æˆ `bubbles/key` ç»Ÿä¸€æŒ‰é”®ç»‘å®šç®¡ç† | âœ… |
| é›†æˆ `bubbles/help` ç»„ä»¶æ˜¾ç¤ºæŒ‰é”®æç¤º | âœ… |
| æ·»åŠ  `?` é”®åˆ‡æ¢è¯¦ç»†å¸®åŠ© | âœ… |
| å®ç°åˆ†é˜¶æ®µ KeyMapï¼ˆset/timeskipï¼‰ | âœ… |
| ä¿®å¤ ESC é”®å¤„ç†ï¼ˆç»Ÿä¸€ä¸º "esc"ï¼‰ | âœ… |
| æ­»ä»£ç æ¸…ç†ï¼ˆåˆ é™¤ 9 ä¸ªæœªä½¿ç”¨å‡½æ•°ï¼‰ | âœ… |
| ç”Ÿæˆä»£ç åœ°å›¾ (CODEMAPS/) | âœ… |

### æ–‡æ¡£ä¼˜åŒ– âœ…

> æ–‡æ¡£æ•´ç†ä¸ç²¾ç®€

| ä»»åŠ¡ | çŠ¶æ€ |
|------|------|
| ç”Ÿæˆ token-optimized codemaps | âœ… |
| åˆ é™¤å†—ä½™æ¶æ„æ–‡æ¡£ | âœ… |
| æ›´æ–°æŠ€æœ¯æ ˆä¾èµ–ä¿¡æ¯ | âœ… |
| æ›´æ–°å±æ€§ç³»ç»Ÿæ–‡æ¡£ | âœ… |
