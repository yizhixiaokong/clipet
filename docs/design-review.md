# Clipet 设计评估报告

> 评估日期：2026-02-25
> 评估范围：全部文档 (design.md / roadmap.md / evolution.md / architecture.md / plugin-guide.md) + 全部代码实现

---

## 一、时间与生命周期（拓麻歌子核心）

### Q1. 属性是否会随现实时间自然变化？关闭程序后是否继续变化？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 已实现 |
| 文档 | ❌ **未记录**（已修正） |

**代码**：`pet.go` `SimulateDecay` 按实际经过时间衰减属性：
- 饱腹 -3/小时，快乐 -2/小时，精力 -1/小时
- 饱腹 < 20 时健康 -0.5/小时
- 健康归零 → 死亡

离线补偿：`ApplyOfflineDecay` 在程序启动时计算 `time.Since(LastCheckedAt)` 并调用 `SimulateDecay`。

**文档**：design.md 之前只记录了属性范围和操作增减量，**完全没有提到衰减系统**。（已补充）

---

### Q2. 是否存在"长期忽视后明显恶化"的机制？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅线性衰减 |
| 文档 | ❌ 未记录 |

代码中衰减是**纯线性**的，没有"长期忽视加速恶化"（比如连续3天不管衰减加倍）。只有一个间接的正反馈循环：饱腹低 → 健康下降 → 最终死亡。但速度是恒定的。

**缺失**：没有类似拓麻歌子的"生病状态"或"紧急警告"来强化忽视的后果感。

---

### Q3. 是否存在"生病"或"异常状态"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |
| 文档 | ❌ 未提及 |

没有 `Sick`、`Poisoned` 等状态标记。Pet 只有四个属性 + `Alive` 布尔值。健康低只是一个数字，没有触发特殊视觉/行为。

---

### Q4. 是否存在"死亡"？永久死亡？可复活？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 永久死亡已实现 |
| 文档 | ❌ **未记录**（已修正） |

代码：`Health <= 0` → `Alive = false`。所有操作检查 `!p.Alive` 后返回 "宠物已经不在了..."。**当前无任何复活机制。** 路线图 M6 有"死亡与重生机制"计划但未实现。

---

### Q5. 是否存在"老年阶段"或寿命终点？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |
| 文档 | ❌ 未提及 |

Legend 阶段是终态（`不再进化`），但没有自然老死机制。理论上宠物在 Legend 阶段可以永远存活。

---

## 二、节奏控制（防止变成无限刷）

### Q6. 是否存在每日互动上限或收益递减？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 已实现 |
| 文档 | ⚠️ 部分记录（已修正） |

- **冷却时间**：Feed 10min, Play 5min, Rest 15min, Heal 20min, Talk 2min, Adventure 10min
- **收益递减**：`diminish(base, current) = base × (100 - current) / 100`，属性越接近满值增长越小
- 没有硬性"每日上限"，但冷却+递减提供了软上限

roadmap.md 的 M2.5 提到了冷却和递减，但 design.md 之前**未记录公式细节**。（已补充）

---

### Q7. 是否存在"过度玩耍惩罚"？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅间接限制 |

Play 消耗精力(-10)，精力 < 10 无法玩耍。Rest 恢复精力但降低快乐(-5)。形成了玩耍→累→休息→不开心的循环，但没有明确的"过度玩耍"惩罚机制。

---

### Q8. 是否设计成"低频玩家也能正常成长"？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 中性 |

- 衰减是线性的（不会加速），一天登录一次可恢复大部分属性
- 但进化需要**绝对次数**（如对话≥10、冒险≥5、互动≥500），低频玩家进化速度会很慢
- `FeedRegularity` 要求 ≥0.7（机甲路线），这对低频玩家不利

**结论**：当前设计偏向中高频率玩家，低频玩家不会死但成长极慢。

---

## 三、情绪与波动性

### Q9. 心情是否会出现"短期波动"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |
| 文档 | ❌ 未提及 |

心情是**纯属性计算派生值**：`MoodScore = Hunger×0.25 + Happiness×0.35 + Health×0.25 + Energy×0.15`。没有随机波动、突发事件触发的情绪变化。

---

### Q10. 是否存在"情绪惯性"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |

心情在每次查询时实时计算。拉高 Happiness 后心情立即改善，没有"恢复延迟"或"情绪稳定器"机制。

---

## 四、记忆与连续性

### Q11. 是否记录长期行为统计？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 已记录 |
| 文档 | ⚠️ 仅进化文档提及 |

Pet 持久化了：`TotalInteractions`, `GamesWon`, `AdventuresCompleted`, `DialogueCount`, `FeedCount`, `AccHappiness`, `AccHealth`, `AccPlayful`, `DayInteractions`, `NightInteractions`, `FeedRegularity`。

**缺失**：没有"连续互动天数"、"最长在线时间"等连续性统计。design.md 未列出这些字段。

---

### Q12. 对话是否会根据长期行为改变？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅间接 |

对话按 `(stage, mood)` 匹配。长期行为 → 进化 → 阶段改变 → 对话库改变。但没有"同阶段内因互动次数多而解锁新对话"的机制。

---

### Q13. 是否存在"一次性关键事件"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |

没有剧情事件、成就解锁、纪念事件。进化本身算是一次性的，但不是"scripted event"。

---

## 五、进化系统深度

### Q14. 不同进化分支是否带来玩法差异？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅内容差异 |

分支的实际差异：
- ✅ 不同的 ASCII 动画帧
- ✅ 不同的对话台词
- ✅ 不同的可用冒险事件（按 `stage` 过滤）
- ❌ **没有机制差异**（衰减率相同、操作相同、属性增减相同）

---

### Q15. 分支是否影响属性衰减速率 / 冒险风格 / 依赖程度？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 完全不影响 |

`SimulateDecay` 硬编码衰减率，不看 stage/branch。所有分支的属性操作（Feed/Play/Rest/Heal）完全相同。

---

### Q16. 进化是否不可逆？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 不可逆 |
| 文档 | ❌ 未明确说明 |

`DoEvolve` 直接覆写 `StageID`/`Stage` 并重置累积值，无回退路径。进化屏幕 Esc 可在确认前取消，一旦 Enter 确认则永久生效。

---

## 六、冒险系统定位

### Q17. 冒险是否会改变宠物性格或发展方向？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不会 |

冒险只影响四个属性的当前值和 `AdventuresCompleted++`。没有性格标签或发展方向修改。

---

### Q18. 冒险是否存在长期后果？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅间接 |

`AdventuresCompleted` 是进化条件之一（如 `min_adventures = 5/15`）。但冒险结果不会产生永久属性偏移或特殊状态。

---

### Q19. 是否存在"重大剧情冒险"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |

所有冒险结构相同（描述+2选项+加权结果），没有一次性剧情冒险、多段式冒险或冒险链。

---

## 七、终局设计

### Q20. 达到 Legend 后是否有新阶段？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 无 |

Legend 阶段没有进化边。到达 Legend 后，玩家只能继续日常互动、对话、冒险，但没有新的成长目标。

---

### Q21. 是否存在"转生机制"？

❌ 未实现。路线图 M6 计划。

---

### Q22. 是否存在"收集型目标"（图鉴、多形态收集）？

❌ 未实现。路线图 M6 有"多宠物存档"计划，但无图鉴系统。

---

## 八、终端特性利用

### Q23. 是否利用真实时间（昼夜变化）？

| 维度 | 状态 |
|------|------|
| 代码 | ✅ 部分利用 |
| 文档 | ⚠️ 仅进化文档提及 |

`trackTimeOfDay()` 按 6:00-18:00 分昼夜计数，影响进化条件（`night_interactions_bias` / `day_interactions_bias`）。但**没有视觉上的昼夜表现**（如背景色/对话语气不同）。

---

### Q24. 是否利用长期未打开触发特殊事件？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 仅衰减 |

`ApplyOfflineDecay` 只做数值衰减。没有"你走了好久，我好想你"的特殊对话或事件。

---

### Q25. 是否存在节日或现实时间联动事件？

❌ 不存在。

---

## 九、压力与责任感（拓麻歌子灵魂）

### Q26. 玩家是否会产生"如果我不管它会出事"的感觉？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 存在但较弱 |

死亡机制确实存在（饿→健康下降→死亡），但：
- 衰减速度慢（从满属性到饿死需要 ~40 小时不管）
- 没有明确的"SOS信号"或视觉警告
- 没有"三天不喂生病"之类的阶段性恶化

---

### Q27. 是否存在需要"及时处理"的紧急状态？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |

没有 `Sick`、`Emergency` 状态。低属性只是一个数字，没有触发特殊事件或紧急UI提示。

---

### Q28. 是否存在"因忽视导致的进化分支"？

| 维度 | 状态 |
|------|------|
| 代码 | ❌ 不存在 |

所有进化条件都是**正向积累**：需要互动次数、属性偏好累积、喂食规律等。没有"因忽视而进化成阴暗形态"的设计。

---

## 十、情感峰值

### Q29. 是否设计过明确的情感高潮时刻？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅进化时 |

进化是唯一的高光时刻（✨ 动画 + 形态变化 + 新对话解锁）。缺少：
- 第一次说出完整句子（egg→baby）
- 宠物主动表达感谢
- 生病求助
- 里程碑庆祝

---

### Q30. 是否存在"宠物主动行为"？

| 维度 | 状态 |
|------|------|
| 代码 | ⚠️ 仅自动对话 |

`TickAutoDialogue`: 每3分钟30%概率触发随机对话气泡。但没有：
- 主动请求喂食/玩耍
- 主动触发冒险
- 根据属性状态主动表达需求

---

## 十一、系统透明度

### Q31. 玩家是否能看到所有属性数值？

✅ 是。四项核心属性以进度条+数字显示在状态面板。心情、阶段、年龄均可见。

---

### Q32. 是否存在隐藏机制？

✅ 存在隐藏机制：

| 隐藏要素 | 说明 |
|---------|------|
| `AccHappiness/AccHealth/AccPlayful` | 进化累积分，玩家看不到 |
| `DayInteractions/NightInteractions` | 昼夜互动计数 |
| `FeedRegularity` | 喂食规律性比率 |
| `diminish()` 公式 | 收益递减的具体计算 |
| 进化具体条件 | 玩家不知道需要满足什么条件 |

---

## 十二、核心三问

### A. 玩家三天不打开，会发生什么？

72小时离线后 `ApplyOfflineDecay` 计算：

| 属性 | 初始(典型) | 变化 | 结果 |
|------|-----------|------|------|
| 饱腹 | 50 | -216 | **0** |
| 快乐 | 60 | -144 | **0** |
| 精力 | 65 | -72 | **0** |
| 健康 | 70 | -31 (饱腹<20后约62小时×0.5) | **~39** |

结果：宠物**存活但极度痛苦** (miserable)。Sad 动画。所有操作仍可用。再不管约3天后死亡。

**缺失**：没有特殊回归对话、没有"我好想你"事件、没有视觉上的特殊提示。

---

### B. 玩家一个月认真照顾，会发生什么？

假设每天4次互动、规律喂食、对话、冒险：

| 时间节点 | 事件 |
|---------|------|
| 1小时 | egg → baby（小猫咪诞生，开始说"喵~"）|
| 24小时 | baby → child（咒术/战斗/机甲三选一，取决于养成偏好）|
| 72小时 | child → adult（6种成年形态之一）|
| ~720小时(30天) | adult → legend（如果满足500次互动+属性≥90）|

一个月大约刚好可以达到 Legend（720小时≈30天）。但 500 次互动需要高频率才能达成。

**到达 Legend 后**：无新目标。对话变得哲理化，但玩法完全相同。

---

### C. 玩家故意冷落或虐待，会发生什么？

当前没有"虐待"操作（不能打/骂）。冷落的后果：
- 属性自然衰减 → 心情 miserable → 悲伤动画 + 悲伤台词
- 持续忽视 → 饱腹归零 → 健康下降 → **永久死亡**
- 死亡后所有操作返回 "宠物已经不在了..."
- **没有复活机制**，只能删存档重来

**缺失**：没有"宠物哭泣"、"绝望台词"、"求救"等强化情感冲击的设计。

---

## 文档 vs 代码 不一致汇总

| 问题 | 类型 | 位置 | 修正状态 |
|------|------|------|---------|
| 属性衰减系统完全未记录 | 文档缺失 | design.md | ✅ 已修正 |
| 死亡机制未记录 | 文档缺失 | design.md | ✅ 已修正 |
| 收益递减公式未记录 | 文档缺失 | design.md | ✅ 已修正 |
| 操作冷却表未记录 | 文档缺失 | design.md | ✅ 已修正 |
| 自动对话机制未记录 | 文档缺失 | design.md | ✅ 已修正 |
| 冒险系统细节不足 | 文档缺失 | design.md | ✅ 已修正 |
| M4 冒险系统标记为"计划中"但已实现 | 文档过期 | roadmap.md | ✅ 已修正 |
| architecture.md 目录结构过时 | 文档过期 | architecture.md | ✅ 已修正 |
| Go 版本: design.md 写1.26+ 实际1.25+ | 不一致 | design.md | ✅ 已修正 |

---

## 设计缺口优先级排序

| 优先级 | 缺失机制 | 对应问题 | 影响 |
|--------|---------|---------|------|
| **P0** | 无"生病/紧急状态"，低属性没有特殊反馈 | Q3/Q27 | 玩家缺乏"如果不管会出事"的紧迫感 |
| **P0** | 进化分支无机制差异（只是换皮+台词） | Q14/Q15 | 分支选择缺乏重量感 |
| **P1** | 无情绪惯性/随机波动 | Q9/Q10 | 心情像一个机械公式，没有"生命感" |
| **P1** | 无宠物主动需求表达 | Q30 | 宠物像被动的数值容器 |
| **P1** | 无长期忽视后加速恶化 | Q2 | 衰减太线性，没有"临界点"的紧张感 |
| **P1** | Legend 后无内容 | Q20/Q21/Q22 | 终局空虚 |
| **P2** | 无一次性关键事件/情感高潮设计 | Q13/Q29 | 缺少记忆点 |
| **P2** | 无离线回归特殊事件 | Q24 | 错过了天然的情感触点 |
| **P2** | 无节日/昼夜视觉联动 | Q23/Q25 | 终端特性利用不足 |
| **P2** | 无忽视导致的进化分支 | Q28 | 缺少"堕落路线"的戏剧性 |
