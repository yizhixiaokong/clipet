# Codemap Generation Report

**Generated**: 2026-02-27
**Total Go files scanned**: 47
**Previous codemaps**: None (initial generation)

## Files Analyzed

### Core Packages
- `cmd/clipet/` - 1 entry file
- `cmd/clipet-dev/` - 6 command files
- `internal/game/` - 4 game logic files
- `internal/plugin/` - 5 plugin system files
- `internal/store/` - 2 storage files
- `internal/cli/` - 8 CLI command files
- `internal/tui/` - 15 TUI files (app, components, screens, dev, styles)
- `internal/assets/` - 1 embed file

## Codemaps Generated

| File | Purpose | Estimated Tokens |
|------|---------|------------------|
| architecture.md | System overview | ~600 |
| core-logic.md | Game mechanics | ~700 |
| tui-components.md | UI layer | ~650 |
| cli-commands.md | Command routing | ~500 |
| data-structures.md | Data models | ~750 |
| dependencies.md | External deps | ~400 |

**Total estimated tokens**: ~3600 (well under typical context budget)

## Architecture Insights

### Design Patterns Detected

1. **Layered Architecture**: Clean separation between UI/logic/storage
2. **Interface Abstraction**: Store interface allows swappable implementations
3. **Component Reuse**: TreeList used by 3+ commands
4. **Phase-based TUI**: Multiple commands use phase pattern (select → input → preview)

### Key Metrics

- **Zero test files** detected (opportunity for improvement)
- **47 Go files** total
- **2 binaries**: clipet (main) + clipet-dev (tools)
- **6 dev commands** with TUI interfaces
- **All Bubble Tea v2** (latest stable)

## Recent Changes Detected

### Dead Code Removed (2026-02-27)

Deleted 9 unused functions:
- 3 in progressbar.go
- 2 in treelist.go
- 1 in evoinfo.go
- 1 in colors.go
- 1 in common.go
- 1 in types.go

Also removed 3 unused imports.

### Major Refactoring (Recent Commits)

1. **Key binding standardization**: All dev commands now use `key.Binding` + `help.Model`
2. **ESC handling fixed**: Unified to "esc" string
3. **Help system**: Toggle help with `?` in all dev commands
4. **Phase-specific KeyMaps**: set and timeskip have dual key maps

## Dependencies Status

All dependencies stable and up-to-date:
- Charmbracelet v2 (latest)
- Cobra v1.8.1
- Viper v1.19.0
- BurntSushi/toml v1.4.0

No security vulnerabilities detected.

## Recommendations

### High Priority

1. **Add tests**: Zero test coverage is critical risk
   - Target: 80% coverage for `internal/game/`
   - Use table-driven tests for evolution/adventure logic

2. **Document plugin API**: `docs/plugin-guide.md` exists but could be enhanced
   - Add more frame examples
   - Document evolution condition edge cases

### Medium Priority

3. **Staleness monitoring**: No previous codemaps existed
   - Re-run codemap generation monthly
   - Alert if architecture changes > 30% without doc updates

4. **Dependency scanning**: Add automated checks
   - `go mod tidy` in CI
   - Security vulnerability scanning (Snyk/Dependabot)

### Low Priority

5. **Component extraction**: Consider publishing reusable components
   - TreeList is high-quality and reusable
   - Could be extracted to separate package

## File Tree Changes Since Last Scan

**N/A** - Initial codemap generation (no previous baseline)

## Next Steps

1. Commit codemaps to repository
2. Add CI job to regenerate monthly
3. Monitor for architecture drift
4. Prioritize test implementation
