[species]
id = "cat"
name = "猫"
description = "灵动的小猫咪，展示插件系统的完整能力。从一颗神秘之蛋开始，成长为奥术、狂野或机械方向的传奇生物。"
author = "clipet-builtin"
version = "2.0.0"

[species.base_stats]
hunger = 50
happiness = 60
health = 70
energy = 65

# ============================================================
# 生命周期配置 (Phase 2)
# ============================================================

[lifecycle]
max_age_hours = 240.0       # 10 天寿命
ending_type = "death"       # 自然离世
warning_threshold = 0.75    # 75% 寿命时预警（7.5天）

# ============================================================
# 个性特征定义 (Phase 1)
# ============================================================

# 九条命：死亡时有 30% 概率复活
[[traits]]
id = "nine_lives"
name = "九条命"
description = "死亡时有 30% 概率复活，恢复 25% 生命值"
type = "passive"
[traits.passive_effect]
resurrect_chance = 0.3
health_restore_percent = 25.0

# 呼噜治愈：消耗精力通过呼噜治愈自己
[[traits]]
id = "purr_heal"
name = "呼噜治愈"
description = "消耗精力通过呼噜治愈自己，恢复 15 点健康"
type = "active"
[traits.active_effect]
energy_cost = 10
health_restore = 15
cooldown = "30m"

# 夜猫子：晚上更活跃
[[traits]]
id = "night_owl"
name = "夜猫子"
description = "晚上更活跃，夜间互动进化点数 +50%"
type = "modifier"
[traits.evolution_modifier]
night_interaction_bonus = 1.5

# 挑食：喂食饱食度 -20%，但快乐度 +10%
[[traits]]
id = "picky_eater"
name = "挑食"
description = "对食物比较挑剔，但喂食时心情更好"
type = "passive"
[traits.passive_effect]
feed_hunger_bonus = -0.2
feed_happiness_bonus = 0.1

# ============================================================
# 进化阶段定义
# ============================================================

# --- Egg ---
[[stages]]
id = "egg"
name = "神秘之蛋"
phase = "egg"

# --- Baby ---
[[stages]]
id = "baby"
name = "小猫咪"
phase = "baby"

# --- Child: 3 branches ---
[[stages]]
id = "child_arcane"
name = "咒术小猫"
phase = "child"

[[stages]]
id = "child_feral"
name = "战斗小猫"
phase = "child"

[[stages]]
id = "child_mech"
name = "机甲小猫"
phase = "child"

# --- Adult: 6 branches ---
[[stages]]
id = "adult_arcane_shadow"
name = "暗影魅猫"
phase = "adult"

[[stages]]
id = "adult_arcane_crystal"
name = "水晶预言猫"
phase = "adult"

[[stages]]
id = "adult_feral_flame"
name = "烈焰狮"
phase = "adult"

[[stages]]
id = "adult_feral_frost"
name = "霜暴豹"
phase = "adult"

[[stages]]
id = "adult_mech_cyber"
name = "赛博猞猁"
phase = "adult"

[[stages]]
id = "adult_mech_chrome"
name = "合金猎豹"
phase = "adult"

# --- Legend: 6 ultimate forms ---
[[stages]]
id = "legend_arcane_shadow"
name = "虚空行者"
phase = "legend"

[[stages]]
id = "legend_arcane_crystal"
name = "星辰贤者"
phase = "legend"

[[stages]]
id = "legend_feral_flame"
name = "不灭炎帝"
phase = "legend"

[[stages]]
id = "legend_feral_frost"
name = "极寒霜神"
phase = "legend"

[[stages]]
id = "legend_mech_cyber"
name = "量子幽灵"
phase = "legend"

[[stages]]
id = "legend_mech_chrome"
name = "星际掠夺者"
phase = "legend"

# ============================================================
# 进化路径
# ============================================================

# Egg -> Baby
[[evolutions]]
from = "egg"
to = "baby"
[evolutions.condition]
min_age_hours = 1.0

# Baby -> Child (3 branches)
[[evolutions]]
from = "baby"
to = "child_arcane"
[evolutions.condition]
min_age_hours = 24.0
attr_bias = "happiness"
min_dialogues = 10

[[evolutions]]
from = "baby"
to = "child_feral"
[evolutions.condition]
min_age_hours = 24.0
attr_bias = "health"
min_adventures = 5

[[evolutions]]
from = "baby"
to = "child_mech"
[evolutions.condition]
min_age_hours = 24.0
attr_bias = "playful"
min_feed_regularity = 0.7

# Child Arcane -> Adult (2 branches)
[[evolutions]]
from = "child_arcane"
to = "adult_arcane_shadow"
[evolutions.condition]
min_age_hours = 72.0
night_interactions_bias = true

[[evolutions]]
from = "child_arcane"
to = "adult_arcane_crystal"
[evolutions.condition]
min_age_hours = 72.0
day_interactions_bias = true

# Child Feral -> Adult (2 branches)
[[evolutions]]
from = "child_feral"
to = "adult_feral_flame"
[evolutions.condition]
min_age_hours = 72.0
attr_bias = "hunger"

[[evolutions]]
from = "child_feral"
to = "adult_feral_frost"
[evolutions.condition]
min_age_hours = 72.0
attr_bias = "energy"

# Child Mech -> Adult (2 branches)
[[evolutions]]
from = "child_mech"
to = "adult_mech_cyber"
[evolutions.condition]
min_age_hours = 72.0
min_dialogues = 30

[[evolutions]]
from = "child_mech"
to = "adult_mech_chrome"
[evolutions.condition]
min_age_hours = 72.0
min_adventures = 15

# Adult -> Legend (6 branches)
[[evolutions]]
from = "adult_arcane_shadow"
to = "legend_arcane_shadow"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
happiness = 90

[[evolutions]]
from = "adult_arcane_crystal"
to = "legend_arcane_crystal"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
happiness = 90

[[evolutions]]
from = "adult_feral_flame"
to = "legend_feral_flame"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
health = 90

[[evolutions]]
from = "adult_feral_frost"
to = "legend_feral_frost"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
energy = 90

[[evolutions]]
from = "adult_mech_cyber"
to = "legend_mech_cyber"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
happiness = 85

[[evolutions]]
from = "adult_mech_chrome"
to = "legend_mech_chrome"
[evolutions.condition]
min_age_hours = 720.0
min_interactions = 500
[evolutions.condition.min_attr]
health = 85

# ============================================================
# Scripts (reserved for future extension)
# ============================================================
[scripts]
# on_evolve = "scripts/on_evolve.lua"
# on_adventure = "scripts/on_adventure.lua"

# ============================================================
# 终局定义 (Phase 2)
# ============================================================

# 幸福终老：高快乐度 + 长寿
[[endings]]
type = "blissful_passing"
name = "幸福终老"
message = "带着满足的笑容，你的猫咪安详地离开了..."
[endings.condition]
min_happiness = 80
min_age_hours = 200.0

# 冒险一生：完成多次冒险
[[endings]]
type = "adventurous_life"
name = "冒险一生"
message = "它度过了充满冒险的一生，成为了传奇..."
[endings.condition]
min_adventures = 30

# 平静休息：默认终局
[[endings]]
type = "peaceful_rest"
name = "平静休息"
message = "平静地度过了这一生，它已经离开了..."
[endings.condition]

